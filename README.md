# TweetX Backend API

A backend API implemented for the [react-tweetx-frontend](https://github.com/ranepaarth/react-tweetx-frontend.git) project.

## Features

- Secure Authentication (access+refresh token)
- Secured Authentication
- Forgot password
- CRUD functionality (for tweets)
- Connecting Users (follow/ unfollow another user)
- Searching Users (to connect or view their profile)
- Bookmark (help users to bookmark tweets of their choice)
- Like & dislike functionality (for tweets)

## Tech Stack
* [NodeJS](https://nodejs.org/) This is a cross-platform runtime environment built on Chrome's V8 JavaScript engine used in running JavaScript codes on the server. It allows for installation and managing of dependencies and communication with databases.
- [Express.js](https://expressjs.com/): A minimalist and robust web framework for building APIs and web servers with Node.js.
- [MongoDB Atlas](https://www.mongodb.com/docs/atlas/) This is a free open source NoSQL document database with scalability and flexibility. Data are stored in flexible JSON-like documents.
- [Mongoose ODM](https://mongoosejs.com/docs/guide.html) This makes it easy to write MongoDB validation by providing a straight-forward, schema-based solution to model to application data.

## Installation

1. Clone the repository: `git clone https://github.com/ranepaarth/react-tweetx-backend.git`
2. Navigate to the project: `cd react-tweetx-backend`
3. Install dependencies: `npm install`

   #### Environment variables

   Add a `.env` file in the root of the project.

   ```
   # A secret to sign the jwt cookies
   # Can be generated by running below command in your terminal
   #node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
   JWT_SECRET

   # Your MongoDB Database connection string
   MONGO_URI

   # A Port number to get the backend API up and running on your local machine
   PORT

   #Initially during the development phase the value will be "development"
   # After deploying change the variable value
   NODE_ENV

   # Your frontend URL
   # Used to configure the cors options
   # For development it depends on the framework/library you are using to develop the  frontend
   # After deploying the frontend, change the value to your frontend domain
   ALLOWED_URLS

   COOKIE_NAME

   # Can be generated by running below command in your terminal
   #node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
   ACCESS_TOKEN_SECRET
   ACCESS_TOKEN_EXPIRY=3d

   #Can be generated by running below command in your terminal node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
   REFRESH_TOKEN_SECRET
   REFRESH_TOKEN_EXPIRY=30d

   # The ACCESS_TOKEN_EXPIRY and REFRESH_TOKEN_EXPIRY can be changed according to your preferences but, the duration of ACCESS_TOKEN_EXPIRY has to be less than that of REFRESH_TOKEN_EXPIRY
   ```

## Usage

1. Start development server `npm run server`
2. Open any API tool of your choice for e.g. [Postman](https://www.postman.com/), [Thunder Client](https://www.thunderclient.com/) and use `http://localhost:3001` as your baseURL for testing the following API routes

## API Endpoints



   | Method | Endpoint                  | Description                                                                                 |
   | :----------- | :----------------------------- | :-------------------------------------------------------------------------------------- |
   | `POST`       | `/api/auth/register `          | To sign up a new user                                                                   |
   | `POST`       | `/api/auth/login`              | To login an existing user                                                               |
   | `POST`       | `/api/auth/logout`             | To logout the current logged in user                                                    |
   | `GET`        | `/api/auth/refresh`            | To verify the cookie and generate a new Access Token                                    |
   | `PATCH`      | `/api/auth/reset`              | To update the user password                                                             |
   | `GET`        | `/api/users/all`               | Retrieve all users                                                                      |
   | `GET`        | `/api/users/user/:userId`      | Retrieve a single user with matching user id                                            |
   | `GET`        | `/api/users/profile`           | Retrieve the profile of current logged in user                                          |
   | `GET`        | `/api/users/profile/:userName` | Retrieve profile of the user with matching userName                                     |
   | `GET`        | `/api/users/profile/:userName` | Retrieve profile of the user with matching userName                                     |
   | `GET`        | `/api/users/search/:userName`  | Retrieve all users with matching userName. This is implemented for search functionality |
   | `PATCH`      | `/api/users/handle-follow`     | Follow another user                                                                     |
   | `PATCH`      | `/api/users/handle-unfollow`   | Unfollow another user                                                                   |
   | `POST`       | `/api/tweets/create`           | Create a new tweets                                                                     |
   | `GET`        | `/api/tweets/all`              | Retrieve all tweets (current user + users that are being followed)                      |
   | `GET`        | `/api/tweets/all/:tweetId`     | Retrieve single tweet whose id matched the provided tweetId                             |
   | `GET`        | `/api/tweets/all/:tweetId`     | Retrieve single tweet whose id matched the provided tweetId                             |
   | `PATCH`      | `/api/tweets/like/:tweetId`    | Like or dislike a tweet                                                                 |
   | `PATCH`      | `/api/tweets/save/:tweetId`    | Save (bookmark) or remove a tweet from the saved tweets list                            |
   | `GET`        | `/api/tweets/saved/all`        | Retrieve all saved (bookmarked) tweets                                                  |
   | `DELETE`        | `/api/tweets/delete/:tweetId`  | Delete a tweet whose id matched the provided tweetId                                    |

